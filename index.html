<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>风清扬硅基账号查验余额联动</title><style>html,body{margin:0;padding:0;height:100%;overflow:hidden;}body{display:flex;flex-direction:row;background-color:#f0f0f0;}.left,.right{flex:1;box-sizing:border-box;overflow-y:auto;}.left{background-color:#fff;border-right:1px solid transparent;padding:0;}.right{background-color:#f9f9f9;padding:0;}.container,.gj-container{margin:20px;}.container{background-color:#87C159;padding:15px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.1);}textarea{width:100%;min-height:100px;margin:10px 0;padding:8px;font-family:monospace;resize:vertical;}button{padding:8px 15px;margin:5px;border:none;border-radius:4px;background-color:#007BFF;color:#fff;cursor:pointer;}button:hover{background-color:#0056b3;}.gj-container{background-color:#ADCACB;padding:25px;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,.1);}.logo{display:block;width:48px;height:48px;margin:0 auto 16px;}h1{text-align:center;margin-bottom:1.5rem;font-size:1.8rem;color:#2c3e50;}.results-content{background-color:#f9f9f9;padding:10px;border-radius:6px;border:1px solid #ddd;font-size:.9rem;min-height:40px;white-space:pre-wrap;margin-bottom:.75rem;line-height:1.4;}</style></head><body><div class="left"><div class="container"><h2>风清扬数据转换工具</h2><div style="text-align:center"><label for="input">输入数据（每行一条数据）：</label><br><textarea id="input" placeholder="请输入多行数据..."></textarea><button onclick="processData()">转换为逗号分隔</button><label for="output">转换结果：</label><br><textarea id="output" readonly placeholder="结果会在这里显示" style="color:#1a73e8"></textarea><button onclick="copyToClipboard()">复制结果</button></div></div><script>function processData(){var e=document.getElementById("input").value;e=e.replace(/，/g,",");var t=e.split(/\r?\n/).map(function(e){return e.trim();}).filter(function(e){return e!=="";});var n=t.join(",");document.getElementById("output").value=n;}async function copyToClipboard(){try{var e=document.getElementById("output").value;await navigator.clipboard.writeText(e);alert("内容已复制到剪贴板");}catch(e){alert("复制失败: "+e);}}</script></div><div class="right"><div class="gj-container"><img src="https://github.githubassets.com/favicons/favicon.svg" alt="logo" class="logo"/><h1>硅基流动Token余额检测</h1><textarea id="tokens" placeholder="请输入 API Key，多个以英文逗号分隔"></textarea><label for="threshold">请输入最低余额阈值 (默认1)</label><input id="threshold" type="number" value="1"/><label for="concurrency">并发请求数 (默认5)</label><input id="concurrency" type="number" value="5"/><button id="checkButton" onclick="checkTokens()">检测账号</button><button id="copyButton" class="copy-button" onclick="copyValidTokens()" style="display:none">复制所有有效账号</button><div class="results-section"><h2>有效账号 (余额 ≥ 阈值) <span id="validCount" class="counter">0</span></h2><div id="validResults" class="results-content"></div></div><div class="results-section"><h2>低余额账号 (0 < 余额 < 阈值) <span id="lowBalanceCount" class="counter">0</span></h2><div id="lowBalanceResults" class="results-content"></div></div><div class="results-section"><h2>零余额账号 <span id="zeroBalanceCount" class="counter">0</span></h2><div id="zeroBalanceResults" class="results-content"></div></div><div class="results-section"><h2>无效账号 <span id="invalidCount" class="counter">0</span></h2><div id="invalidResults" class="results-content"></div></div><div class="results-section"><h2>重复账号 <span id="duplicateCount" class="counter">0</span></h2><div id="duplicateResults" class="results-content"></div></div></div><script>async function runWithConcurrencyLimit(e,t,n){let r=0,i=0,o=Array(e.length);return new Promise((s,a)=>{function u(){for(;i<t&&r<e.length;){const c=r++;i++,e[c]().then(e=>{o[c]=e,n(e,c)}).catch(e=>{o[c]={error:e.message},n(o[c],c)}).finally(()=>{i--,r===e.length&&0===i?s(o):u()})}}u()})}async function checkTokens(){let e=document.getElementById("tokens").value.trim();if(!e)return void alert("请输入至少一个 API Key");let t=parseFloat(document.getElementById("threshold").value)||1,n=parseInt(document.getElementById("concurrency").value)||5,r=e.split(",").map(e=>e.trim()).filter(e=>""!==e),i=new Set,o=[];r.forEach(e=>{i.has(e)?o.push(e):i.add(e)});document.getElementById("duplicateCount").textContent=o.length,document.getElementById("duplicateResults").textContent=o.length?o.join("\n"):"无",document.getElementById("checkButton").disabled=!0,document.getElementById("checkButton").innerHTML='<span class="loader"></span>检测中...',document.getElementById("validResults").textContent="",document.getElementById("lowBalanceResults").textContent="",document.getElementById("zeroBalanceResults").textContent="",document.getElementById("invalidResults").textContent="",document.getElementById("validCount").textContent="0",document.getElementById("lowBalanceCount").textContent="0",document.getElementById("zeroBalanceCount").textContent="0",document.getElementById("invalidCount").textContent="0",document.getElementById("copyButton").style.display="none";let s=[];const a=Array.from(i).map(e=>()=>checkOneToken(e));function u(e){if(!e||e.error){document.getElementById("invalidCount").textContent=parseInt(document.getElementById("invalidCount").textContent)+1,document.getElementById("invalidResults").textContent+="未知Token(请求失败): "+(e&&e.error||"unknown")+"\n";return}if(!e.isValid){document.getElementById("invalidCount").textContent=parseInt(document.getElementById("invalidCount").textContent)+1,document.getElementById("invalidResults").textContent+=e.token+" ("+e.message+")\n";return}let n=e.balance,c=e.token+" (余额:"+n+")";if(0===n){document.getElementById("zeroBalanceCount").textContent=parseInt(document.getElementById("zeroBalanceCount").textContent)+1,document.getElementById("zeroBalanceResults").textContent+=c+"\n"}else if(n<t){document.getElementById("lowBalanceCount").textContent=parseInt(document.getElementById("lowBalanceCount").textContent)+1,document.getElementById("lowBalanceResults").textContent+=c+"\n"}else{document.getElementById("validCount").textContent=parseInt(document.getElementById("validCount").textContent)+1,document.getElementById("validResults").textContent+=c+"\n",s.push(e.token),1===document.getElementById("validCount").textContent&&(document.getElementById("copyButton").style.display="block")}}try{await runWithConcurrencyLimit(a,n,u)}catch(e){alert("检测失败: "+e.message),console.error(e)}finally{document.getElementById("checkButton").disabled=!1,document.getElementById("checkButton").innerText="检测账号"}window.__VALID_TOKENS_FOR_COPY__=s}async function checkOneToken(e){try{const t=await fetch("https://api.siliconflow.cn/v1/user/info",{method:"GET",headers:{"Authorization":"Bearer "+e}});if(!t.ok){const e=await t.json().catch(()=>null);return{token:e,isValid:!1,message:e&&e.message?e.message:"验证失败"}}const n=await t.json();const r=n.data&&n.data.totalBalance?n.data.totalBalance:0;return{token:e,isValid:!0,balance:r}}catch(e){return{token:e,isValid:!1,message:e.message}}}function copyValidTokens(){let e=window.__VALID_TOKENS_FOR_COPY__||[];if(!e.length)return void alert("没有可复制的有效账号(≥阈值)");let t=e.join(",");const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("有效账号已复制到剪贴板")}</script></div></body></html>
